# IQLé…ç½® - å…¨é¢ç¨³å®šåŒ–ç‰ˆæœ¬
# 
# ä¿®å¤å†…å®¹ï¼ˆåŸºäºè¯¦ç»†è¯Šæ–­ï¼‰:
# 1. âœ… Reward scaling (0.1x) - é˜²æ­¢Qå€¼çˆ†ç‚¸
# 2. âœ… Target Q network (EMA) - ç¨³å®šQå­¦ä¹ 
# 3. âœ… å†»ç»“policy 3000æ­¥ - å…ˆç¨³å®šQ/V
# 4. âœ… è£å‰ªQ-Våˆ°[-10, 10]
# 5. âœ… è£å‰ªpolicyæƒé‡åˆ°max=20
# 6. âœ… Betaé™åˆ°1.0 - æ›´ä¿å®ˆçš„AWR
#
# ç›®æ ‡å°ºåº¦ï¼ˆå¥åº·è®­ç»ƒåº”çœ‹åˆ°ï¼‰:
#   Mean(Q-V)   â‰ˆ -2 ~ 0
#   Std(Q-V)    â‰ˆ 3 ~ 8
#   Max(Q-V)    â‰ˆ 10 ~ 15
#   Positive%   â‰ˆ 30% (1-tau)

data:
  path: intermediate_data/ready_data.csv
  sheet: 0
  state_cols:
    - vanco_level(ug/mL)
    - creatinine(mg/dL)
    - wbc(K/uL)
    - bun(mg/dL)
    - temperature
    - sbp
    - heart_rate

train:
  seed: 42
  total_steps: 10000              # å……åˆ†è®­ç»ƒ
  batch_size: 64
  log_interval: 50
  ckpt_interval: 500
  buffer_capacity: 10000
  policy_warmup_steps: 3000       # ğŸ”§ å‰3000æ­¥å†»ç»“policyï¼Œåªè®­Q/V

model:
  hidden: [256, 256]
  lr: 0.0001                      # ğŸ”§ é™ä½å­¦ä¹ ç‡
  gamma: 0.99
  tau: 0.7                        # V = 70%åˆ†ä½æ•° -> æœŸæœ›30% positive
  beta: 1.0                       # ğŸ”§ æ›´ä¿å®ˆçš„beta
  weight_clip: 20.0
  reward_scale: 0.1               # ğŸ”§ ç¼©æ”¾rewardé˜²æ­¢Qçˆ†ç‚¸
  use_target_q: true              # ğŸ”§ å¯ç”¨target Q network
  target_update_rate: 0.005       # Polyak averaging rate

workdir: algorithms/iql/runs/exp_stable_v3
